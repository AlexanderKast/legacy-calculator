<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGACY | Calculadora de Ganancias</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'legacy': {
                            'dark': '#0a0a0f',
                            'darker': '#050508',
                            'card': '#12121a',
                            'border': '#1f1f2e',
                            'gold': '#c9a962',
                            'gold-light': '#dfc07f',
                            'gold-dark': '#a68a4a',
                            'accent': '#e8a849',
                            'text': '#f5f5f7',
                            'text-muted': '#8b8b9e',
                        }
                    },
                    fontFamily: {
                        'display': ['Playfair Display', 'serif'],
                        'body': ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%);
            min-height: 100vh;
        }

        .gold-gradient {
            background: linear-gradient(135deg, #c9a962 0%, #e8a849 50%, #c9a962 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .card-glass {
            background: rgba(18, 18, 26, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(201, 169, 98, 0.1);
        }

        .input-luxury {
            background: rgba(10, 10, 15, 0.6);
            border: 1px solid rgba(201, 169, 98, 0.2);
            transition: all 0.3s ease;
        }

        .input-luxury:focus {
            border-color: #c9a962;
            box-shadow: 0 0 20px rgba(201, 169, 98, 0.15);
            outline: none;
        }

        .btn-gold {
            background: linear-gradient(135deg, #c9a962 0%, #a68a4a 100%);
            transition: all 0.3s ease;
        }

        .btn-gold:hover {
            background: linear-gradient(135deg, #dfc07f 0%, #c9a962 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(201, 169, 98, 0.3);
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .product-item:hover {
            background: rgba(201, 169, 98, 0.05);
        }

        .scrollbar-luxury::-webkit-scrollbar {
            width: 6px;
        }

        .scrollbar-luxury::-webkit-scrollbar-track {
            background: rgba(10, 10, 15, 0.5);
        }

        .scrollbar-luxury::-webkit-scrollbar-thumb {
            background: rgba(201, 169, 98, 0.3);
            border-radius: 3px;
        }

        .glow-gold {
            box-shadow: 0 0 40px rgba(201, 169, 98, 0.1);
        }

        .number-display {
            font-variant-numeric: tabular-nums;
        }

        .divider-gold {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(201, 169, 98, 0.3), transparent);
        }

        select option {
            background: #12121a;
            color: #f5f5f7;
        }
    </style>
</head>
<body class="font-body text-legacy-text antialiased">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Datos de productos
        const productsData = [
            { sku: "50129982", nombre: "Kit LOI", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 4890756, precioMiembroSinImpuesto: 4369748, bonoMinoristaSinImpuesto: 521008, vv: 1000 },
            { sku: "50130460", nombre: "Kit Social Seller Nu Colour¬Æ Lash + Brow Serum", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 3529412, precioMiembroSinImpuesto: 2907563, bonoMinoristaSinImpuesto: 621849, vv: 500 },
            { sku: "50130478", nombre: "Kit Belleza + Bienestar", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 2470588, precioMiembroSinImpuesto: 2210084, bonoMinoristaSinImpuesto: 260504, vv: 500 },
            { sku: "50130480", nombre: "Kit D√∫o iO Rose Gold", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 2470588, precioMiembroSinImpuesto: 2210084, bonoMinoristaSinImpuesto: 260504, vv: 500 },
            { sku: "50130295", nombre: "Kit ageLOC¬Æ Facial", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 2470588, precioMiembroSinImpuesto: 2210084, bonoMinoristaSinImpuesto: 260504, vv: 500 },
            { sku: "50130372", nombre: "Kit ageLOC¬Æ Piel Radiante", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 2470588, precioMiembroSinImpuesto: 2210084, bonoMinoristaSinImpuesto: 260504, vv: 500 },
            { sku: "50130465", nombre: "Kit Social Seller Nu Colour¬Æ Lash + Brow (11 pzas)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1831933, precioMiembroSinImpuesto: 1504202, bonoMinoristaSinImpuesto: 327731, vv: 250 },
            { sku: "50130518", nombre: "Kit Tru Face Essence Ultra Social Seller (6pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1512605, precioMiembroSinImpuesto: 1218487, bonoMinoristaSinImpuesto: 294118, vv: 250 },
            { sku: "50130476", nombre: "ageLOC¬Æ WellSpa iO Essentials Bienestar", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1302521, precioMiembroSinImpuesto: 1163866, bonoMinoristaSinImpuesto: 138655, vv: 250 },
            { sku: "50130479", nombre: "ageLOC¬Æ WellSpa iO Essentials Belleza", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1302521, precioMiembroSinImpuesto: 1163866, bonoMinoristaSinImpuesto: 138655, vv: 250 },
            { sku: "50130443", nombre: "Sistema ageLOC¬Æ LumiSpa iO Rose Gold", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1075630, precioMiembroSinImpuesto: 907563, bonoMinoristaSinImpuesto: 168067, vv: 200 },
            { sku: "50130259", nombre: "Sistema ageLOC¬Æ Galvanic Face Spa", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1302521, precioMiembroSinImpuesto: 1163866, bonoMinoristaSinImpuesto: 138655, vv: 250 },
            { sku: "50130358", nombre: "Kit ageLOC¬Æ Boost", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1302521, precioMiembroSinImpuesto: 1163866, bonoMinoristaSinImpuesto: 138655, vv: 250 },
            { sku: "50130445", nombre: "Collagen Essentials Kit", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 957983, precioMiembroSinImpuesto: 882353, bonoMinoristaSinImpuesto: 75630, vv: 180 },
            { sku: "50130367", nombre: "ageLOC¬Æ Boost Essentials", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 983193, precioMiembroSinImpuesto: 793950, bonoMinoristaSinImpuesto: 189244, vv: 125 },
            { sku: "50130027", nombre: "AP 24 Whitening Flouride Toothpaste 25 pk", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1134454, precioMiembroSinImpuesto: 567227, bonoMinoristaSinImpuesto: 567227, vv: 100 },
            { sku: "50130410", nombre: "AP 24 Social Seller Kit", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 873950, precioMiembroSinImpuesto: 436975, bonoMinoristaSinImpuesto: 436975, vv: 75 },
            { sku: "50130413", nombre: "Polishing Bar Social Seller Kit", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 873950, precioMiembroSinImpuesto: 436975, bonoMinoristaSinImpuesto: 436975, vv: 75 },
            { sku: "50130412", nombre: "Face Wash Social Seller Kit", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 788655, precioMiembroSinImpuesto: 592857, bonoMinoristaSinImpuesto: 195798, vv: 125 },
            { sku: "50130513", nombre: "Kit Peptide Pout (10pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 680672, precioMiembroSinImpuesto: 521008, bonoMinoristaSinImpuesto: 159664, vv: 100 },
            { sku: "50130521", nombre: "Social Seller Kit Cica Balm (5pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 449580, precioMiembroSinImpuesto: 344538, bonoMinoristaSinImpuesto: 105042, vv: 65 },
            { sku: "50130514", nombre: "Kit Peptide Pout Social Seller (5pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 357143, precioMiembroSinImpuesto: 273109, bonoMinoristaSinImpuesto: 84034, vv: 50 },
            { sku: "50130520", nombre: "Kit B√°sico Cica Balm (3pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 285714, precioMiembroSinImpuesto: 220588, bonoMinoristaSinImpuesto: 65126, vv: 40 },
            { sku: "50002889", nombre: "ageLOC¬Æ Body iO Activating Gel", categoria: "WellSpa iO", precioPublicoSinImpuesto: 263025, precioMiembroSinImpuesto: 189076, bonoMinoristaSinImpuesto: 73950, vv: 40 },
            { sku: "50002490", nombre: "ageLOC¬Æ Body iO Serum", categoria: "WellSpa iO", precioPublicoSinImpuesto: 263025, precioMiembroSinImpuesto: 189076, bonoMinoristaSinImpuesto: 73950, vv: 40 },
            { sku: "50001492", nombre: "ageLOC¬Æ LumiSpa Gel Limpiador - Normal/Combo", categoria: "Limpiadores LumiSpa", precioPublicoSinImpuesto: 192353, precioMiembroSinImpuesto: 156639, bonoMinoristaSinImpuesto: 35714, vv: 30 },
            { sku: "50002665", nombre: "LumiSpa iO Rose Gold Cabezal ‚Äî Normal", categoria: "Cabezales LumiSpa", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50002664", nombre: "LumiSpa iO Rose Gold Cabezal ‚Äî Sensible", categoria: "Cabezales LumiSpa", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50002438", nombre: "LumiSpa iO Cabezal ‚Äî Normal", categoria: "Cabezales LumiSpa", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50002437", nombre: "LumiSpa iO Cabezal ‚Äî Sensible", categoria: "Cabezales LumiSpa", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50002596", nombre: "Rose Gold Base para ageLOC¬Æ LumiSpa iO", categoria: "Accesorios LumiSpa", precioPublicoSinImpuesto: 41261, precioMiembroSinImpuesto: 41261, bonoMinoristaSinImpuesto: 0, vv: 0 },
            { sku: "50002442", nombre: "Cargador para ageLOC¬Æ LumiSpa iO", categoria: "Accesorios LumiSpa", precioPublicoSinImpuesto: 32101, precioMiembroSinImpuesto: 32101, bonoMinoristaSinImpuesto: 0, vv: 0 },
            { sku: "50001876", nombre: "Geles Faciales Galvanic Spa con ageLOC¬Æ", categoria: "Galvanic Spa", precioPublicoSinImpuesto: 200756, precioMiembroSinImpuesto: 143445, bonoMinoristaSinImpuesto: 57311, vv: 31 },
            { sku: "50003902", nombre: "ageLOC¬Æ Body Shaping Gel", categoria: "Galvanic Spa", precioPublicoSinImpuesto: 243025, precioMiembroSinImpuesto: 173866, bonoMinoristaSinImpuesto: 69160, vv: 38 },
            { sku: "50002085", nombre: "Cargador Magn√©tico para ageLOC¬Æ Boost", categoria: "ageLOC¬Æ Boost", precioPublicoSinImpuesto: 46807, precioMiembroSinImpuesto: 46807, bonoMinoristaSinImpuesto: 0, vv: 0 },
            { sku: "50001928", nombre: "ageLOC¬Æ Boost Activating Serum", categoria: "ageLOC¬Æ Boost", precioPublicoSinImpuesto: 149076, precioMiembroSinImpuesto: 112773, bonoMinoristaSinImpuesto: 36303, vv: 25 },
            { sku: "50101251", nombre: "Nu Skin 180¬∞ Face Wash", categoria: "Nu Skin 180¬∞", precioPublicoSinImpuesto: 164202, precioMiembroSinImpuesto: 123277, bonoMinoristaSinImpuesto: 40924, vv: 26 },
            { sku: "50004308", nombre: "Tru Face Essence Ultra 30ct", categoria: "Tratamientos ageLOC¬Æ", precioPublicoSinImpuesto: 302521, precioMiembroSinImpuesto: 243697, bonoMinoristaSinImpuesto: 58824, vv: 50 },
            { sku: "50004312", nombre: "ageLOC¬Æ TF Peptide Retinol Complex", categoria: "Tratamientos ageLOC¬Æ", precioPublicoSinImpuesto: 312605, precioMiembroSinImpuesto: 251261, bonoMinoristaSinImpuesto: 61345, vv: 50 },
            { sku: "50102945", nombre: "ageLOC¬Æ Tru Face Essence Ultra Uplifting Cream", categoria: "Tratamientos ageLOC¬Æ", precioPublicoSinImpuesto: 397647, precioMiembroSinImpuesto: 304202, bonoMinoristaSinImpuesto: 93445, vv: 65 },
            { sku: "50101226", nombre: "NaPCA Moisture Mist", categoria: "Cuidado Facial", precioPublicoSinImpuesto: 55966, precioMiembroSinImpuesto: 41849, bonoMinoristaSinImpuesto: 14118, vv: 8 },
            { sku: "50002690", nombre: "Bright Toner", categoria: "Cuidado Facial", precioPublicoSinImpuesto: 121849, precioMiembroSinImpuesto: 92437, bonoMinoristaSinImpuesto: 29412, vv: 19 },
            { sku: "50001785", nombre: "Day Dream Protective Cream SPF 35", categoria: "Cuidado Facial", precioPublicoSinImpuesto: 175714, precioMiembroSinImpuesto: 133529, bonoMinoristaSinImpuesto: 42185, vv: 28 },
            { sku: "50001647", nombre: "AP 24 Whitening Toothpaste", categoria: "Cuidado Dental", precioPublicoSinImpuesto: 60504, precioMiembroSinImpuesto: 30252, bonoMinoristaSinImpuesto: 30252, vv: 5 },
            { sku: "50001994", nombre: "Epoch¬Æ Polishing Bar", categoria: "Epoch¬Æ", precioPublicoSinImpuesto: 72269, precioMiembroSinImpuesto: 36134, bonoMinoristaSinImpuesto: 36134, vv: 7 },
            { sku: "50004280", nombre: "Epoch¬Æ Cica Balm", categoria: "Epoch¬Æ", precioPublicoSinImpuesto: 99160, precioMiembroSinImpuesto: 78992, bonoMinoristaSinImpuesto: 20168, vv: 16 },
            { sku: "50002652", nombre: "Sunright Solar Screen SPF 50", categoria: "Sunright¬Æ", precioPublicoSinImpuesto: 147059, precioMiembroSinImpuesto: 117647, bonoMinoristaSinImpuesto: 29412, vv: 20 },
            { sku: "50002983", nombre: "Nu Colour¬Æ Peptide Pout", categoria: "Nu Colour¬Æ", precioPublicoSinImpuesto: 78992, precioMiembroSinImpuesto: 61345, bonoMinoristaSinImpuesto: 17647, vv: 12 },
            { sku: "50002663", nombre: "Nu Colour¬Æ Lash + Brow Serum", categoria: "Nu Colour¬Æ", precioPublicoSinImpuesto: 201681, precioMiembroSinImpuesto: 159664, bonoMinoristaSinImpuesto: 42017, vv: 33 },
            { sku: "50003648", nombre: "G3 Juice 2pk", categoria: "Pharmanex", precioPublicoSinImpuesto: 449580, precioMiembroSinImpuesto: 321176, bonoMinoristaSinImpuesto: 128403, vv: 70 },
            { sku: "50002282", nombre: "Collagen +", categoria: "Pharmanex", precioPublicoSinImpuesto: 634454, precioMiembroSinImpuesto: 478992, bonoMinoristaSinImpuesto: 155462, vv: 100 },
            { sku: "50113509", nombre: "Donaci√≥n VitaMeal¬Æ (1 bolsa)", categoria: "Nourish the Children", precioPublicoSinImpuesto: 83697, precioMiembroSinImpuesto: 83697, bonoMinoristaSinImpuesto: 0, vv: 21 },
            { sku: "50000924", nombre: "Donaci√≥n VitaMeal¬Æ (5 bolsas)", categoria: "Nourish the Children", precioPublicoSinImpuesto: 414370, precioMiembroSinImpuesto: 414370, bonoMinoristaSinImpuesto: 0, vv: 105 },
            { sku: "50130425", nombre: "ageLOC¬Æ LumiSpa Gel Limpiador - Suscripci√≥n", categoria: "Suscripci√≥n", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50130427", nombre: "Geles Faciales Galvanic Spa - Suscripci√≥n", categoria: "Suscripci√≥n", precioPublicoSinImpuesto: 168655, precioMiembroSinImpuesto: 120588, bonoMinoristaSinImpuesto: 48067, vv: 26 },
            { sku: "50130459", nombre: "G3 1 Bottle - Suscripci√≥n", categoria: "Suscripci√≥n", precioPublicoSinImpuesto: 205882, precioMiembroSinImpuesto: 152941, bonoMinoristaSinImpuesto: 52941, vv: 31 },
            { sku: "50130474", nombre: "ageLOC¬Æ Body Activating Gel - Suscripci√≥n", categoria: "Suscripci√≥n", precioPublicoSinImpuesto: 235714, precioMiembroSinImpuesto: 169748, bonoMinoristaSinImpuesto: 65966, vv: 35 },
            { sku: "50130475", nombre: "ageLOC¬Æ Serum - Suscripci√≥n", categoria: "Suscripci√≥n", precioPublicoSinImpuesto: 235714, precioMiembroSinImpuesto: 169748, bonoMinoristaSinImpuesto: 65966, vv: 35 },
            { sku: "50130517", nombre: "Tru Face Essence Ultra 30ct - Suscripci√≥n", categoria: "Suscripci√≥n", precioPublicoSinImpuesto: 272269, precioMiembroSinImpuesto: 219328, bonoMinoristaSinImpuesto: 52941, vv: 45 },
            { sku: "50130456", nombre: "Collagen + - Suscripci√≥n", categoria: "Suscripci√≥n", precioPublicoSinImpuesto: 319328, precioMiembroSinImpuesto: 294118, bonoMinoristaSinImpuesto: 25210, vv: 60 },
        ];

        // Funci√≥n para formatear n√∫meros como moneda colombiana
        const formatCurrency = (value) => {
            return new Intl.NumberFormat('es-CO', {
                style: 'currency',
                currency: 'COP',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(value);
        };

        // Funci√≥n para formatear n√∫meros con separadores de miles
        const formatNumber = (value) => {
            return new Intl.NumberFormat('es-CO').format(Math.round(value));
        };

        // Calcular porcentaje de Bono 2 (Ganancia por Venta)
        const getBono2Percentage = (puntos) => {
            if (puntos >= 10000) return 20;
            if (puntos >= 2501) return 12;
            if (puntos >= 500) return 8;
            return 4;
        };

        // Calcular porcentaje de Bono 3 (Ganancia por Referir)
        const getBono3Percentage = (puntos) => {
            if (puntos >= 10000) return 24;
            if (puntos >= 2500) return 16;
            if (puntos >= 500) return 12;
            if (puntos >= 250) return 4;
            return 0;
        };

        // Componente de l√≠nea de producto
        const ProductLine = ({ index, product, quantity, onProductChange, onQuantityChange, onRemove, showRemove }) => {
            const [searchTerm, setSearchTerm] = useState('');
            const [isOpen, setIsOpen] = useState(false);

            const filteredProducts = useMemo(() => {
                if (!searchTerm) return productsData;
                const term = searchTerm.toLowerCase();
                return productsData.filter(p => 
                    p.nombre.toLowerCase().includes(term) || 
                    p.categoria.toLowerCase().includes(term) ||
                    p.sku.includes(term)
                );
            }, [searchTerm]);

            const groupedProducts = useMemo(() => {
                const groups = {};
                filteredProducts.forEach(p => {
                    if (!groups[p.categoria]) groups[p.categoria] = [];
                    groups[p.categoria].push(p);
                });
                return groups;
            }, [filteredProducts]);

            return (
                <div className="card-glass rounded-xl p-5 mb-4 animate-fade-in">
                    <div className="flex items-center justify-between mb-4">
                        <span className="text-legacy-gold font-display text-lg">Producto {index + 1}</span>
                        {showRemove && (
                            <button 
                                onClick={onRemove}
                                className="text-legacy-text-muted hover:text-red-400 transition-colors text-sm"
                            >
                                ‚úï Eliminar
                            </button>
                        )}
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-4">
                        {/* Selector de producto */}
                        <div className="lg:col-span-6 relative">
                            <label className="block text-legacy-text-muted text-xs uppercase tracking-wider mb-2">
                                Seleccionar Producto
                            </label>
                            <div className="relative">
                                <input
                                    type="text"
                                    placeholder="Buscar por nombre, categor√≠a o SKU..."
                                    value={product ? product.nombre : searchTerm}
                                    onChange={(e) => {
                                        setSearchTerm(e.target.value);
                                        if (product) onProductChange(null);
                                        setIsOpen(true);
                                    }}
                                    onFocus={() => setIsOpen(true)}
                                    className="w-full input-luxury rounded-lg px-4 py-3 text-legacy-text placeholder-legacy-text-muted"
                                />
                                {isOpen && !product && (
                                    <div className="absolute z-50 w-full mt-2 max-h-64 overflow-y-auto scrollbar-luxury card-glass rounded-lg border border-legacy-border shadow-xl">
                                        {Object.entries(groupedProducts).map(([categoria, products]) => (
                                            <div key={categoria}>
                                                <div className="px-4 py-2 text-legacy-gold text-xs uppercase tracking-wider bg-legacy-darker sticky top-0">
                                                    {categoria}
                                                </div>
                                                {products.map(p => (
                                                    <div
                                                        key={p.sku}
                                                        onClick={() => {
                                                            onProductChange(p);
                                                            setSearchTerm('');
                                                            setIsOpen(false);
                                                        }}
                                                        className="px-4 py-3 cursor-pointer product-item transition-colors border-b border-legacy-border/30 last:border-0"
                                                    >
                                                        <div className="text-legacy-text text-sm">{p.nombre}</div>
                                                        <div className="text-legacy-text-muted text-xs mt-1">
                                                            SKU: {p.sku} ‚Ä¢ {p.vv} puntos
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Cantidad */}
                        <div className="lg:col-span-2">
                            <label className="block text-legacy-text-muted text-xs uppercase tracking-wider mb-2">
                                Cantidad
                            </label>
                            <input
                                type="number"
                                min="1"
                                value={quantity}
                                onChange={(e) => onQuantityChange(Math.max(1, parseInt(e.target.value) || 1))}
                                className="w-full input-luxury rounded-lg px-4 py-3 text-legacy-text text-center number-display"
                            />
                        </div>

                        {/* Info del producto */}
                        {product && (
                            <>
                                <div className="lg:col-span-2">
                                    <label className="block text-legacy-text-muted text-xs uppercase tracking-wider mb-2">
                                        Precio P√∫blico
                                    </label>
                                    <div className="input-luxury rounded-lg px-4 py-3 text-legacy-gold-light number-display text-sm">
                                        {formatCurrency(product.precioPublicoSinImpuesto)}
                                    </div>
                                </div>
                                <div className="lg:col-span-2">
                                    <label className="block text-legacy-text-muted text-xs uppercase tracking-wider mb-2">
                                        Precio Miembro
                                    </label>
                                    <div className="input-luxury rounded-lg px-4 py-3 text-legacy-text number-display text-sm">
                                        {formatCurrency(product.precioMiembroSinImpuesto)}
                                    </div>
                                </div>
                            </>
                        )}
                    </div>

                    {/* Puntos */}
                    {product && (
                        <div className="mt-4 flex items-center gap-2">
                            <span className="text-legacy-text-muted text-sm">Puntos por producto:</span>
                            <span className="text-legacy-gold font-semibold">{product.vv} VV</span>
                            <span className="text-legacy-text-muted mx-2">‚Ä¢</span>
                            <span className="text-legacy-text-muted text-sm">Total puntos:</span>
                            <span className="text-legacy-gold font-semibold">{formatNumber(product.vv * quantity)} VV</span>
                        </div>
                    )}
                </div>
            );
        };

        // Componente de tarjeta de resultado
        const ResultCard = ({ title, value, subtitle, highlight = false, icon }) => (
            <div className={`card-glass rounded-xl p-5 ${highlight ? 'glow-gold border-legacy-gold/30' : ''}`}>
                <div className="flex items-start justify-between">
                    <div>
                        <p className="text-legacy-text-muted text-xs uppercase tracking-wider mb-1">{title}</p>
                        <p className={`font-display text-2xl lg:text-3xl number-display ${highlight ? 'gold-gradient' : 'text-legacy-text'}`}>
                            {value}
                        </p>
                        {subtitle && (
                            <p className="text-legacy-text-muted text-sm mt-1">{subtitle}</p>
                        )}
                    </div>
                    {icon && (
                        <span className="text-2xl">{icon}</span>
                    )}
                </div>
            </div>
        );

        // Componente principal
        const LegacyCalculator = () => {
            const [productLines, setProductLines] = useState([{ product: null, quantity: 1 }]);

            const addProductLine = () => {
                setProductLines([...productLines, { product: null, quantity: 1 }]);
            };

            const removeProductLine = (index) => {
                if (productLines.length > 1) {
                    setProductLines(productLines.filter((_, i) => i !== index));
                }
            };

            const updateProductLine = (index, field, value) => {
                const updated = [...productLines];
                updated[index][field] = value;
                setProductLines(updated);
            };

            // C√°lculos
            const calculations = useMemo(() => {
                let totalPuntos = 0;
                let totalGananciaMinorista = 0;

                productLines.forEach(({ product, quantity }) => {
                    if (product) {
                        totalPuntos += product.vv * quantity;
                        totalGananciaMinorista += product.bonoMinoristaSinImpuesto * quantity;
                    }
                });

                const porcentajeBono2 = getBono2Percentage(totalPuntos);
                const porcentajeBono3 = getBono3Percentage(totalPuntos);

                // Calcular ganancia por venta (Bono 2) basado en precio miembro
                let baseGananciaVenta = 0;
                productLines.forEach(({ product, quantity }) => {
                    if (product) {
                        baseGananciaVenta += product.precioMiembroSinImpuesto * quantity;
                    }
                });
                const gananciaVenta = baseGananciaVenta * (porcentajeBono2 / 100);

                // Calcular ganancia por referir (Bono 3) basado en precio miembro
                const gananciaReferir = baseGananciaVenta * (porcentajeBono3 / 100);

                const totalGanancias = totalGananciaMinorista + gananciaVenta + gananciaReferir;

                return {
                    totalPuntos,
                    totalGananciaMinorista,
                    porcentajeBono2,
                    gananciaVenta,
                    porcentajeBono3,
                    gananciaReferir,
                    totalGanancias
                };
            }, [productLines]);

            const hasProducts = productLines.some(pl => pl.product !== null);

            return (
                <div className="min-h-screen py-8 px-4">
                    <div className="max-w-6xl mx-auto">
                        {/* Header */}
                        <header className="text-center mb-12">
                            <h1 className="font-display text-5xl lg:text-6xl font-bold mb-3">
                                <span className="gold-gradient">LEGACY</span>
                            </h1>
                            <p className="text-legacy-text-muted text-lg font-light tracking-wide">
                                Calculadora de Ganancias
                            </p>
                            <div className="divider-gold w-32 mx-auto mt-6"></div>
                        </header>

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Panel de productos */}
                            <div className="lg:col-span-2">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="font-display text-2xl text-legacy-text">Mis Productos</h2>
                                    <button 
                                        onClick={addProductLine}
                                        className="btn-gold text-legacy-darker px-5 py-2 rounded-lg font-medium text-sm"
                                    >
                                        + Agregar Producto
                                    </button>
                                </div>

                                {productLines.map((line, index) => (
                                    <ProductLine
                                        key={index}
                                        index={index}
                                        product={line.product}
                                        quantity={line.quantity}
                                        onProductChange={(p) => updateProductLine(index, 'product', p)}
                                        onQuantityChange={(q) => updateProductLine(index, 'quantity', q)}
                                        onRemove={() => removeProductLine(index)}
                                        showRemove={productLines.length > 1}
                                    />
                                ))}

                                {/* Escalas de bonos */}
                                <div className="mt-8 grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div className="card-glass rounded-xl p-5">
                                        <h3 className="text-legacy-gold font-display text-lg mb-3">Escala Ganancia por Venta</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className={`flex justify-between ${calculations.porcentajeBono2 === 4 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>0 - 499 puntos</span><span>4%</span>
                                            </div>
                                            <div className={`flex justify-between ${calculations.porcentajeBono2 === 8 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>500 - 2,500 puntos</span><span>8%</span>
                                            </div>
                                            <div className={`flex justify-between ${calculations.porcentajeBono2 === 12 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>2,501 - 9,999 puntos</span><span>12%</span>
                                            </div>
                                            <div className={`flex justify-between ${calculations.porcentajeBono2 === 20 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>10,000+ puntos</span><span>20%</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="card-glass rounded-xl p-5">
                                        <h3 className="text-legacy-gold font-display text-lg mb-3">Escala Ganancia por Referir</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className={`flex justify-between ${calculations.porcentajeBono3 === 0 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>0 - 249 puntos</span><span>0%</span>
                                            </div>
                                            <div className={`flex justify-between ${calculations.porcentajeBono3 === 4 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>250 - 499 puntos</span><span>4%</span>
                                            </div>
                                            <div className={`flex justify-between ${calculations.porcentajeBono3 === 12 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>500 - 2,499 puntos</span><span>12%</span>
                                            </div>
                                            <div className={`flex justify-between ${calculations.porcentajeBono3 === 16 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>2,500 - 9,999 puntos</span><span>16%</span>
                                            </div>
                                            <div className={`flex justify-between ${calculations.porcentajeBono3 === 24 ? 'text-legacy-gold' : 'text-legacy-text-muted'}`}>
                                                <span>10,000+ puntos</span><span>24%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Panel de resultados */}
                            <div className="lg:col-span-1">
                                <h2 className="font-display text-2xl text-legacy-text mb-6">Mis Ganancias</h2>
                                
                                <div className="space-y-4">
                                    {/* Puntos totales */}
                                    <ResultCard
                                        title="Puntos Totales (VV)"
                                        value={formatNumber(calculations.totalPuntos)}
                                        icon="‚≠ê"
                                    />

                                    <div className="divider-gold my-6"></div>

                                    {/* Ganancia Minorista (Bono 1) */}
                                    <ResultCard
                                        title="Ganancia Minorista"
                                        value={formatCurrency(calculations.totalGananciaMinorista)}
                                        subtitle="Diferencia precio p√∫blico vs miembro"
                                        icon="üíé"
                                    />

                                    {/* Ganancia por Venta (Bono 2) */}
                                    <ResultCard
                                        title={`Ganancia por Venta (${calculations.porcentajeBono2}%)`}
                                        value={formatCurrency(calculations.gananciaVenta)}
                                        subtitle="Basado en tu nivel de puntos"
                                        icon="üìà"
                                    />

                                    {/* Ganancia por Referir (Bono 3) */}
                                    <ResultCard
                                        title={`Ganancia por Referir (${calculations.porcentajeBono3}%)`}
                                        value={formatCurrency(calculations.gananciaReferir)}
                                        subtitle="Bonificaci√≥n por compartir"
                                        icon="ü§ù"
                                    />

                                    <div className="divider-gold my-6"></div>

                                    {/* Total */}
                                    <ResultCard
                                        title="Total Ganancias Potenciales"
                                        value={formatCurrency(calculations.totalGanancias)}
                                        highlight={true}
                                        icon="üèÜ"
                                    />
                                </div>

                                {!hasProducts && (
                                    <div className="mt-6 text-center text-legacy-text-muted text-sm">
                                        <p>Selecciona productos para ver tus ganancias potenciales</p>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Footer */}
                        <footer className="mt-16 text-center">
                            <div className="divider-gold w-48 mx-auto mb-6"></div>
                            <p className="text-legacy-text-muted text-sm">
                                Lista de precios Colombia ‚Ä¢ Abril 2025
                            </p>
                            <p className="text-legacy-text-muted text-xs mt-2 opacity-60">
                                Los c√°lculos son estimados y pueden variar seg√∫n condiciones del programa
                            </p>
                        </footer>
                    </div>
                </div>
            );
        };

        // Renderizar la aplicaci√≥n
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LegacyCalculator />);
    </script>
</body>
</html>
