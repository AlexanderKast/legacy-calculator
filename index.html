<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGACY | Calculadora de Ganancias</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@200;300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'luxury': {
                            'black': '#000000',
                            'dark': '#0a0a0a',
                            'darker': '#050505',
                            'card': '#0f0f0f',
                            'border': '#1a1a1a',
                            'gold': '#d4af37',
                            'gold-light': '#f4d03f',
                            'gold-dark': '#b8960c',
                            'gold-pale': '#e8d5a3',
                            'champagne': '#f7e7ce',
                            'text': '#ffffff',
                            'text-muted': '#6b6b6b',
                            'text-soft': '#9a9a9a',
                        }
                    },
                    fontFamily: {
                        'display': ['Cormorant Garamond', 'serif'],
                        'body': ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            background: #000000;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Fondo con patrón sutil */
        .bg-pattern {
            background-image: 
                radial-gradient(ellipse at 50% 0%, rgba(212, 175, 55, 0.03) 0%, transparent 50%),
                radial-gradient(ellipse at 100% 100%, rgba(212, 175, 55, 0.02) 0%, transparent 40%),
                radial-gradient(ellipse at 0% 100%, rgba(212, 175, 55, 0.02) 0%, transparent 40%);
            background-attachment: fixed;
        }

        /* Líneas decorativas animadas */
        .decorative-lines {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .decorative-lines::before {
            content: '';
            position: absolute;
            top: 20%;
            left: -10%;
            width: 120%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
            transform: rotate(-5deg);
            animation: shimmerLine 8s ease-in-out infinite;
        }

        .decorative-lines::after {
            content: '';
            position: absolute;
            bottom: 30%;
            left: -10%;
            width: 120%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.08), transparent);
            transform: rotate(3deg);
            animation: shimmerLine 10s ease-in-out infinite reverse;
        }

        @keyframes shimmerLine {
            0%, 100% { opacity: 0.3; transform: translateX(-5%) rotate(-5deg); }
            50% { opacity: 0.7; transform: translateX(5%) rotate(-5deg); }
        }

        /* Gradiente dorado premium */
        .gold-gradient-text {
            background: linear-gradient(135deg, #f4d03f 0%, #d4af37 25%, #b8960c 50%, #d4af37 75%, #f4d03f 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldShimmer 4s ease-in-out infinite;
        }

        @keyframes goldShimmer {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        /* Tarjetas con efecto glass premium */
        .card-premium {
            background: linear-gradient(145deg, rgba(15, 15, 15, 0.9) 0%, rgba(10, 10, 10, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(212, 175, 55, 0.1);
            box-shadow: 
                0 0 0 1px rgba(212, 175, 55, 0.05),
                0 20px 40px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.02);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-premium:hover {
            border-color: rgba(212, 175, 55, 0.25);
            box-shadow: 
                0 0 0 1px rgba(212, 175, 55, 0.1),
                0 25px 50px rgba(0, 0, 0, 0.6),
                0 0 60px rgba(212, 175, 55, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
            transform: translateY(-2px);
        }

        /* Tarjeta destacada con glow */
        .card-highlight {
            background: linear-gradient(145deg, rgba(20, 18, 10, 0.95) 0%, rgba(15, 13, 8, 0.98) 100%);
            border: 1px solid rgba(212, 175, 55, 0.3);
            box-shadow: 
                0 0 0 1px rgba(212, 175, 55, 0.1),
                0 20px 40px rgba(0, 0, 0, 0.5),
                0 0 80px rgba(212, 175, 55, 0.08),
                inset 0 0 60px rgba(212, 175, 55, 0.02);
            position: relative;
            overflow: hidden;
        }

        .card-highlight::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(212, 175, 55, 0.03), transparent 30%);
            animation: rotateGlow 15s linear infinite;
        }

        @keyframes rotateGlow {
            100% { transform: rotate(360deg); }
        }

        /* Input premium */
        .input-premium {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.6) 0%, rgba(5, 5, 5, 0.8) 100%);
            border: 1px solid rgba(212, 175, 55, 0.15);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .input-premium:focus {
            border-color: rgba(212, 175, 55, 0.5);
            box-shadow: 
                0 0 0 3px rgba(212, 175, 55, 0.1),
                0 0 30px rgba(212, 175, 55, 0.1),
                inset 0 0 20px rgba(212, 175, 55, 0.02);
            outline: none;
        }

        .input-premium::placeholder {
            color: #4a4a4a;
        }

        /* Botón dorado premium */
        .btn-luxury {
            background: linear-gradient(135deg, #d4af37 0%, #b8960c 50%, #d4af37 100%);
            background-size: 200% auto;
            color: #000000;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 4px 15px rgba(212, 175, 55, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .btn-luxury:hover {
            background-position: right center;
            transform: translateY(-3px);
            box-shadow: 
                0 8px 25px rgba(212, 175, 55, 0.4),
                0 0 40px rgba(212, 175, 55, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .btn-luxury::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg) translateX(-100%);
            transition: transform 0.6s;
        }

        .btn-luxury:hover::after {
            transform: rotate(45deg) translateX(100%);
        }

        /* Animaciones de entrada */
        .animate-fade-up {
            animation: fadeUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            opacity: 0;
        }

        @keyframes fadeUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .animate-delay-1 { animation-delay: 0.1s; }
        .animate-delay-2 { animation-delay: 0.2s; }
        .animate-delay-3 { animation-delay: 0.3s; }
        .animate-delay-4 { animation-delay: 0.4s; }
        .animate-delay-5 { animation-delay: 0.5s; }

        /* Dropdown premium */
        .dropdown-premium {
            background: linear-gradient(180deg, rgba(15, 15, 15, 0.98) 0%, rgba(10, 10, 10, 0.99) 100%);
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.8),
                0 0 0 1px rgba(212, 175, 55, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.02);
        }

        .dropdown-item {
            transition: all 0.3s ease;
            border-left: 2px solid transparent;
        }

        .dropdown-item:hover {
            background: linear-gradient(90deg, rgba(212, 175, 55, 0.08) 0%, transparent 100%);
            border-left-color: #d4af37;
        }

        /* Scrollbar elegante */
        .scrollbar-luxury::-webkit-scrollbar {
            width: 4px;
        }

        .scrollbar-luxury::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        .scrollbar-luxury::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #d4af37 0%, #b8960c 100%);
            border-radius: 2px;
        }

        /* Divisor dorado con animación */
        .divider-luxury {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.5), transparent);
            position: relative;
        }

        .divider-luxury::after {
            content: '◆';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #d4af37;
            font-size: 8px;
            background: #0a0a0a;
            padding: 0 10px;
        }

        /* Números con estilo */
        .number-display {
            font-variant-numeric: tabular-nums;
            letter-spacing: 0.02em;
        }

        /* Efecto de brillo en hover para valores */
        .value-highlight {
            position: relative;
            display: inline-block;
        }

        .value-highlight::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, #d4af37, transparent);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .value-highlight:hover::after {
            transform: scaleX(1);
        }

        /* Escala activa con glow */
        .scale-active {
            color: #d4af37 !important;
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            position: relative;
        }

        .scale-active::before {
            content: '▸';
            position: absolute;
            left: -15px;
            color: #d4af37;
            animation: pulseArrow 1.5s ease-in-out infinite;
        }

        @keyframes pulseArrow {
            0%, 100% { opacity: 0.5; transform: translateX(0); }
            50% { opacity: 1; transform: translateX(3px); }
        }

        /* Contador animado */
        .counter-animate {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Label elegante */
        .label-elegant {
            font-size: 10px;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: #6b6b6b;
            font-weight: 400;
        }

        /* Icono con glow */
        .icon-glow {
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3));
            transition: filter 0.3s ease;
        }

        .icon-glow:hover {
            filter: drop-shadow(0 0 20px rgba(212, 175, 55, 0.5));
        }

        /* Producto card hover effect */
        .product-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .product-card:hover {
            background: linear-gradient(145deg, rgba(20, 18, 12, 0.9) 0%, rgba(15, 13, 8, 0.95) 100%);
        }

        /* Select styling */
        select option {
            background: #0a0a0a;
            color: #ffffff;
            padding: 10px;
        }

        /* Pulse effect for total */
        .pulse-gold {
            animation: pulseGold 3s ease-in-out infinite;
        }

        @keyframes pulseGold {
            0%, 100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.2); }
            50% { box-shadow: 0 0 0 15px rgba(212, 175, 55, 0); }
        }

        /* Loading shimmer */
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.05), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>
</head>
<body class="font-body text-luxury-text antialiased bg-pattern">
    <!-- Líneas decorativas de fondo -->
    <div class="decorative-lines"></div>
    
    <div id="root" class="relative z-10"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // Datos de productos
        const productsData = [
            { sku: "50129982", nombre: "Kit LOI", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 4890756, precioMiembroSinImpuesto: 4369748, bonoMinoristaSinImpuesto: 521008, vv: 1000 },
            { sku: "50130460", nombre: "Kit Social Seller Nu Colour® Lash + Brow Serum", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 3529412, precioMiembroSinImpuesto: 2907563, bonoMinoristaSinImpuesto: 621849, vv: 500 },
            { sku: "50130478", nombre: "Kit Belleza + Bienestar", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 2470588, precioMiembroSinImpuesto: 2210084, bonoMinoristaSinImpuesto: 260504, vv: 500 },
            { sku: "50130480", nombre: "Kit Dúo iO Rose Gold", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 2470588, precioMiembroSinImpuesto: 2210084, bonoMinoristaSinImpuesto: 260504, vv: 500 },
            { sku: "50130295", nombre: "Kit ageLOC® Facial", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 2470588, precioMiembroSinImpuesto: 2210084, bonoMinoristaSinImpuesto: 260504, vv: 500 },
            { sku: "50130372", nombre: "Kit ageLOC® Piel Radiante", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 2470588, precioMiembroSinImpuesto: 2210084, bonoMinoristaSinImpuesto: 260504, vv: 500 },
            { sku: "50130465", nombre: "Kit Social Seller Nu Colour® Lash + Brow (11 pzas)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1831933, precioMiembroSinImpuesto: 1504202, bonoMinoristaSinImpuesto: 327731, vv: 250 },
            { sku: "50130518", nombre: "Kit Tru Face Essence Ultra Social Seller (6pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1512605, precioMiembroSinImpuesto: 1218487, bonoMinoristaSinImpuesto: 294118, vv: 250 },
            { sku: "50130476", nombre: "ageLOC® WellSpa iO Essentials Bienestar", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1302521, precioMiembroSinImpuesto: 1163866, bonoMinoristaSinImpuesto: 138655, vv: 250 },
            { sku: "50130479", nombre: "ageLOC® WellSpa iO Essentials Belleza", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1302521, precioMiembroSinImpuesto: 1163866, bonoMinoristaSinImpuesto: 138655, vv: 250 },
            { sku: "50130443", nombre: "Sistema ageLOC® LumiSpa iO Rose Gold", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1075630, precioMiembroSinImpuesto: 907563, bonoMinoristaSinImpuesto: 168067, vv: 200 },
            { sku: "50130259", nombre: "Sistema ageLOC® Galvanic Face Spa", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1302521, precioMiembroSinImpuesto: 1163866, bonoMinoristaSinImpuesto: 138655, vv: 250 },
            { sku: "50130358", nombre: "Kit ageLOC® Boost", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1302521, precioMiembroSinImpuesto: 1163866, bonoMinoristaSinImpuesto: 138655, vv: 250 },
            { sku: "50130445", nombre: "Collagen Essentials Kit", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 957983, precioMiembroSinImpuesto: 882353, bonoMinoristaSinImpuesto: 75630, vv: 180 },
            { sku: "50130367", nombre: "ageLOC® Boost Essentials", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 983193, precioMiembroSinImpuesto: 793950, bonoMinoristaSinImpuesto: 189244, vv: 125 },
            { sku: "50130027", nombre: "AP 24 Whitening Flouride Toothpaste 25 pk", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 1134454, precioMiembroSinImpuesto: 567227, bonoMinoristaSinImpuesto: 567227, vv: 100 },
            { sku: "50130410", nombre: "AP 24 Social Seller Kit", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 873950, precioMiembroSinImpuesto: 436975, bonoMinoristaSinImpuesto: 436975, vv: 75 },
            { sku: "50130413", nombre: "Polishing Bar Social Seller Kit", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 873950, precioMiembroSinImpuesto: 436975, bonoMinoristaSinImpuesto: 436975, vv: 75 },
            { sku: "50130412", nombre: "Face Wash Social Seller Kit", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 788655, precioMiembroSinImpuesto: 592857, bonoMinoristaSinImpuesto: 195798, vv: 125 },
            { sku: "50130513", nombre: "Kit Peptide Pout (10pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 680672, precioMiembroSinImpuesto: 521008, bonoMinoristaSinImpuesto: 159664, vv: 100 },
            { sku: "50130521", nombre: "Social Seller Kit Cica Balm (5pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 449580, precioMiembroSinImpuesto: 344538, bonoMinoristaSinImpuesto: 105042, vv: 65 },
            { sku: "50130514", nombre: "Kit Peptide Pout Social Seller (5pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 357143, precioMiembroSinImpuesto: 273109, bonoMinoristaSinImpuesto: 84034, vv: 50 },
            { sku: "50130520", nombre: "Kit Básico Cica Balm (3pk)", categoria: "Kits de Inicio", precioPublicoSinImpuesto: 285714, precioMiembroSinImpuesto: 220588, bonoMinoristaSinImpuesto: 65126, vv: 40 },
            { sku: "50002889", nombre: "ageLOC® Body iO Activating Gel", categoria: "WellSpa iO", precioPublicoSinImpuesto: 263025, precioMiembroSinImpuesto: 189076, bonoMinoristaSinImpuesto: 73950, vv: 40 },
            { sku: "50002490", nombre: "ageLOC® Body iO Serum", categoria: "WellSpa iO", precioPublicoSinImpuesto: 263025, precioMiembroSinImpuesto: 189076, bonoMinoristaSinImpuesto: 73950, vv: 40 },
            { sku: "50001492", nombre: "ageLOC® LumiSpa Gel Limpiador - Normal/Combo", categoria: "Limpiadores LumiSpa", precioPublicoSinImpuesto: 192353, precioMiembroSinImpuesto: 156639, bonoMinoristaSinImpuesto: 35714, vv: 30 },
            { sku: "50002665", nombre: "LumiSpa iO Rose Gold Cabezal — Normal", categoria: "Cabezales LumiSpa", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50002664", nombre: "LumiSpa iO Rose Gold Cabezal — Sensible", categoria: "Cabezales LumiSpa", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50002438", nombre: "LumiSpa iO Cabezal — Normal", categoria: "Cabezales LumiSpa", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50002437", nombre: "LumiSpa iO Cabezal — Sensible", categoria: "Cabezales LumiSpa", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50002596", nombre: "Rose Gold Base para ageLOC® LumiSpa iO", categoria: "Accesorios LumiSpa", precioPublicoSinImpuesto: 41261, precioMiembroSinImpuesto: 41261, bonoMinoristaSinImpuesto: 0, vv: 0 },
            { sku: "50002442", nombre: "Cargador para ageLOC® LumiSpa iO", categoria: "Accesorios LumiSpa", precioPublicoSinImpuesto: 32101, precioMiembroSinImpuesto: 32101, bonoMinoristaSinImpuesto: 0, vv: 0 },
            { sku: "50001876", nombre: "Geles Faciales Galvanic Spa con ageLOC®", categoria: "Galvanic Spa", precioPublicoSinImpuesto: 200756, precioMiembroSinImpuesto: 143445, bonoMinoristaSinImpuesto: 57311, vv: 31 },
            { sku: "50003902", nombre: "ageLOC® Body Shaping Gel", categoria: "Galvanic Spa", precioPublicoSinImpuesto: 243025, precioMiembroSinImpuesto: 173866, bonoMinoristaSinImpuesto: 69160, vv: 38 },
            { sku: "50002085", nombre: "Cargador Magnético para ageLOC® Boost", categoria: "ageLOC® Boost", precioPublicoSinImpuesto: 46807, precioMiembroSinImpuesto: 46807, bonoMinoristaSinImpuesto: 0, vv: 0 },
            { sku: "50001928", nombre: "ageLOC® Boost Activating Serum", categoria: "ageLOC® Boost", precioPublicoSinImpuesto: 149076, precioMiembroSinImpuesto: 112773, bonoMinoristaSinImpuesto: 36303, vv: 25 },
            { sku: "50101251", nombre: "Nu Skin 180° Face Wash", categoria: "Nu Skin 180°", precioPublicoSinImpuesto: 164202, precioMiembroSinImpuesto: 123277, bonoMinoristaSinImpuesto: 40924, vv: 26 },
            { sku: "50004308", nombre: "Tru Face Essence Ultra 30ct", categoria: "Tratamientos ageLOC®", precioPublicoSinImpuesto: 302521, precioMiembroSinImpuesto: 243697, bonoMinoristaSinImpuesto: 58824, vv: 50 },
            { sku: "50004312", nombre: "ageLOC® TF Peptide Retinol Complex", categoria: "Tratamientos ageLOC®", precioPublicoSinImpuesto: 312605, precioMiembroSinImpuesto: 251261, bonoMinoristaSinImpuesto: 61345, vv: 50 },
            { sku: "50102945", nombre: "ageLOC® Tru Face Essence Ultra Uplifting Cream", categoria: "Tratamientos ageLOC®", precioPublicoSinImpuesto: 397647, precioMiembroSinImpuesto: 304202, bonoMinoristaSinImpuesto: 93445, vv: 65 },
            { sku: "50101226", nombre: "NaPCA Moisture Mist", categoria: "Cuidado Facial", precioPublicoSinImpuesto: 55966, precioMiembroSinImpuesto: 41849, bonoMinoristaSinImpuesto: 14118, vv: 8 },
            { sku: "50002690", nombre: "Bright Toner", categoria: "Cuidado Facial", precioPublicoSinImpuesto: 121849, precioMiembroSinImpuesto: 92437, bonoMinoristaSinImpuesto: 29412, vv: 19 },
            { sku: "50001785", nombre: "Day Dream Protective Cream SPF 35", categoria: "Cuidado Facial", precioPublicoSinImpuesto: 175714, precioMiembroSinImpuesto: 133529, bonoMinoristaSinImpuesto: 42185, vv: 28 },
            { sku: "50001647", nombre: "AP 24 Whitening Toothpaste", categoria: "Cuidado Dental", precioPublicoSinImpuesto: 60504, precioMiembroSinImpuesto: 30252, bonoMinoristaSinImpuesto: 30252, vv: 5 },
            { sku: "50001994", nombre: "Epoch® Polishing Bar", categoria: "Epoch®", precioPublicoSinImpuesto: 72269, precioMiembroSinImpuesto: 36134, bonoMinoristaSinImpuesto: 36134, vv: 7 },
            { sku: "50004280", nombre: "Epoch® Cica Balm", categoria: "Epoch®", precioPublicoSinImpuesto: 99160, precioMiembroSinImpuesto: 78992, bonoMinoristaSinImpuesto: 20168, vv: 16 },
            { sku: "50002652", nombre: "Sunright Solar Screen SPF 50", categoria: "Sunright®", precioPublicoSinImpuesto: 147059, precioMiembroSinImpuesto: 117647, bonoMinoristaSinImpuesto: 29412, vv: 20 },
            { sku: "50002983", nombre: "Nu Colour® Peptide Pout", categoria: "Nu Colour®", precioPublicoSinImpuesto: 78992, precioMiembroSinImpuesto: 61345, bonoMinoristaSinImpuesto: 17647, vv: 12 },
            { sku: "50002663", nombre: "Nu Colour® Lash + Brow Serum", categoria: "Nu Colour®", precioPublicoSinImpuesto: 201681, precioMiembroSinImpuesto: 159664, bonoMinoristaSinImpuesto: 42017, vv: 33 },
            { sku: "50003648", nombre: "G3 Juice 2pk", categoria: "Pharmanex", precioPublicoSinImpuesto: 449580, precioMiembroSinImpuesto: 321176, bonoMinoristaSinImpuesto: 128403, vv: 70 },
            { sku: "50002282", nombre: "Collagen +", categoria: "Pharmanex", precioPublicoSinImpuesto: 634454, precioMiembroSinImpuesto: 478992, bonoMinoristaSinImpuesto: 155462, vv: 100 },
            { sku: "50113509", nombre: "Donación VitaMeal® (1 bolsa)", categoria: "Nourish the Children", precioPublicoSinImpuesto: 83697, precioMiembroSinImpuesto: 83697, bonoMinoristaSinImpuesto: 0, vv: 21 },
            { sku: "50000924", nombre: "Donación VitaMeal® (5 bolsas)", categoria: "Nourish the Children", precioPublicoSinImpuesto: 414370, precioMiembroSinImpuesto: 414370, bonoMinoristaSinImpuesto: 0, vv: 105 },
            { sku: "50130425", nombre: "ageLOC® LumiSpa Gel Limpiador - Suscripción", categoria: "Suscripción", precioPublicoSinImpuesto: 133613, precioMiembroSinImpuesto: 109244, bonoMinoristaSinImpuesto: 24370, vv: 22 },
            { sku: "50130427", nombre: "Geles Faciales Galvanic Spa - Suscripción", categoria: "Suscripción", precioPublicoSinImpuesto: 168655, precioMiembroSinImpuesto: 120588, bonoMinoristaSinImpuesto: 48067, vv: 26 },
            { sku: "50130459", nombre: "G3 1 Bottle - Suscripción", categoria: "Suscripción", precioPublicoSinImpuesto: 205882, precioMiembroSinImpuesto: 152941, bonoMinoristaSinImpuesto: 52941, vv: 31 },
            { sku: "50130474", nombre: "ageLOC® Body Activating Gel - Suscripción", categoria: "Suscripción", precioPublicoSinImpuesto: 235714, precioMiembroSinImpuesto: 169748, bonoMinoristaSinImpuesto: 65966, vv: 35 },
            { sku: "50130475", nombre: "ageLOC® Serum - Suscripción", categoria: "Suscripción", precioPublicoSinImpuesto: 235714, precioMiembroSinImpuesto: 169748, bonoMinoristaSinImpuesto: 65966, vv: 35 },
            { sku: "50130517", nombre: "Tru Face Essence Ultra 30ct - Suscripción", categoria: "Suscripción", precioPublicoSinImpuesto: 272269, precioMiembroSinImpuesto: 219328, bonoMinoristaSinImpuesto: 52941, vv: 45 },
            { sku: "50130456", nombre: "Collagen + - Suscripción", categoria: "Suscripción", precioPublicoSinImpuesto: 319328, precioMiembroSinImpuesto: 294118, bonoMinoristaSinImpuesto: 25210, vv: 60 },
        ];

        // Función para formatear números como moneda colombiana
        const formatCurrency = (value) => {
            return new Intl.NumberFormat('es-CO', {
                style: 'currency',
                currency: 'COP',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(value);
        };

        // Función para formatear números con separadores de miles
        const formatNumber = (value) => {
            return new Intl.NumberFormat('es-CO').format(Math.round(value));
        };

        // Calcular porcentaje de Bono 2 (Ganancia por Venta)
        const getBono2Percentage = (puntos) => {
            if (puntos >= 10000) return 20;
            if (puntos >= 2501) return 12;
            if (puntos >= 500) return 8;
            return 4;
        };

        // Calcular porcentaje de Bono 3 (Ganancia por Referir)
        const getBono3Percentage = (puntos) => {
            if (puntos >= 10000) return 24;
            if (puntos >= 2500) return 16;
            if (puntos >= 500) return 12;
            if (puntos >= 250) return 4;
            return 0;
        };

        // Componente de línea de producto
        const ProductLine = ({ index, product, quantity, onProductChange, onQuantityChange, onRemove, showRemove }) => {
            const [searchTerm, setSearchTerm] = useState('');
            const [isOpen, setIsOpen] = useState(false);
            const dropdownRef = useRef(null);

            useEffect(() => {
                const handleClickOutside = (event) => {
                    if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
                        setIsOpen(false);
                    }
                };
                document.addEventListener('mousedown', handleClickOutside);
                return () => document.removeEventListener('mousedown', handleClickOutside);
            }, []);

            const filteredProducts = useMemo(() => {
                if (!searchTerm) return productsData;
                const term = searchTerm.toLowerCase();
                return productsData.filter(p => 
                    p.nombre.toLowerCase().includes(term) || 
                    p.categoria.toLowerCase().includes(term) ||
                    p.sku.includes(term)
                );
            }, [searchTerm]);

            const groupedProducts = useMemo(() => {
                const groups = {};
                filteredProducts.forEach(p => {
                    if (!groups[p.categoria]) groups[p.categoria] = [];
                    groups[p.categoria].push(p);
                });
                return groups;
            }, [filteredProducts]);

            return (
                <div 
                    className="card-premium rounded-2xl p-6 mb-5 animate-fade-up product-card overflow-visible relative"
                    style={{animationDelay: `${index * 0.1}s`, zIndex: 100 - index}}
                >
                    {/* Header del producto */}
                    <div className="flex items-center justify-between mb-5">
                        <div className="flex items-center gap-3">
                            <div className="w-8 h-8 rounded-full bg-gradient-to-br from-luxury-gold to-luxury-gold-dark flex items-center justify-center text-black font-semibold text-sm">
                                {index + 1}
                            </div>
                            <span className="font-display text-xl text-luxury-gold-pale">Producto</span>
                        </div>
                        {showRemove && (
                            <button 
                                onClick={onRemove}
                                className="text-luxury-text-muted hover:text-red-400 transition-all duration-300 text-xs uppercase tracking-widest hover:tracking-wider"
                            >
                                Eliminar
                            </button>
                        )}
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-5">
                        {/* Selector de producto */}
                        <div className="lg:col-span-6 relative z-[100]" ref={dropdownRef}>
                            <label className="label-elegant block mb-2">
                                Seleccionar Producto
                            </label>
                            <div className="relative">
                                <input
                                    type="text"
                                    placeholder="Buscar por nombre, categoría o SKU..."
                                    value={product ? product.nombre : searchTerm}
                                    onChange={(e) => {
                                        setSearchTerm(e.target.value);
                                        if (product) onProductChange(null);
                                        setIsOpen(true);
                                    }}
                                    onFocus={() => setIsOpen(true)}
                                    className="w-full input-premium rounded-xl px-5 py-4 text-luxury-text text-sm"
                                />
                                <div className="absolute right-4 top-1/2 -translate-y-1/2 text-luxury-gold opacity-50">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                        <circle cx="11" cy="11" r="8"/>
                                        <path d="m21 21-4.35-4.35"/>
                                    </svg>
                                </div>
                                {isOpen && !product && (
                                    <div className="absolute z-[9999] w-full mt-2 max-h-72 overflow-y-auto scrollbar-luxury dropdown-premium rounded-xl">
                                        {Object.entries(groupedProducts).map(([categoria, products]) => (
                                            <div key={categoria}>
                                                <div className="px-5 py-3 text-luxury-gold text-[10px] uppercase tracking-[0.2em] bg-black/50 sticky top-0 backdrop-blur-sm border-b border-luxury-gold/10">
                                                    {categoria}
                                                </div>
                                                {products.map(p => (
                                                    <div
                                                        key={p.sku}
                                                        onClick={() => {
                                                            onProductChange(p);
                                                            setSearchTerm('');
                                                            setIsOpen(false);
                                                        }}
                                                        className="px-5 py-4 cursor-pointer dropdown-item border-b border-white/5 last:border-0"
                                                    >
                                                        <div className="text-luxury-text text-sm font-light">{p.nombre}</div>
                                                        <div className="text-luxury-text-muted text-xs mt-1 flex items-center gap-3">
                                                            <span>SKU: {p.sku}</span>
                                                            <span className="text-luxury-gold">{p.vv} VV</span>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Cantidad */}
                        <div className="lg:col-span-2">
                            <label className="label-elegant block mb-2">
                                Cantidad
                            </label>
                            <input
                                type="number"
                                min="1"
                                value={quantity}
                                onChange={(e) => onQuantityChange(Math.max(1, parseInt(e.target.value) || 1))}
                                className="w-full input-premium rounded-xl px-5 py-4 text-luxury-text text-center number-display text-lg font-light"
                            />
                        </div>

                        {/* Info del producto */}
                        {product && (
                            <>
                                <div className="lg:col-span-2">
                                    <label className="label-elegant block mb-2">
                                        Precio Público
                                    </label>
                                    <div className="input-premium rounded-xl px-4 py-4 text-luxury-gold number-display text-sm font-light">
                                        {formatCurrency(product.precioPublicoSinImpuesto)}
                                    </div>
                                </div>
                                <div className="lg:col-span-2">
                                    <label className="label-elegant block mb-2">
                                        Precio Miembro
                                    </label>
                                    <div className="input-premium rounded-xl px-4 py-4 text-luxury-text-soft number-display text-sm font-light">
                                        {formatCurrency(product.precioMiembroSinImpuesto)}
                                    </div>
                                </div>
                            </>
                        )}
                    </div>

                    {/* Puntos */}
                    {product && (
                        <div className="mt-5 pt-5 border-t border-white/5 flex items-center gap-6">
                            <div className="flex items-center gap-2">
                                <span className="text-luxury-text-muted text-xs uppercase tracking-wider">Puntos/unidad</span>
                                <span className="text-luxury-gold font-display text-lg">{product.vv}</span>
                            </div>
                            <div className="w-px h-4 bg-luxury-gold/20"></div>
                            <div className="flex items-center gap-2">
                                <span className="text-luxury-text-muted text-xs uppercase tracking-wider">Total puntos</span>
                                <span className="text-luxury-gold font-display text-lg">{formatNumber(product.vv * quantity)}</span>
                                <span className="text-luxury-gold-dark text-xs">VV</span>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Componente de tarjeta de resultado
        const ResultCard = ({ title, value, subtitle, highlight = false, icon, delay = 0 }) => (
            <div 
                className={`${highlight ? 'card-highlight pulse-gold' : 'card-premium'} rounded-2xl p-5 animate-fade-up`}
                style={{animationDelay: `${delay}s`}}
            >
                <div className="relative z-10">
                    <div className="flex items-start justify-between mb-3">
                        <p className="label-elegant">{title}</p>
                        {icon && (
                            <span className="text-xl icon-glow">{icon}</span>
                        )}
                    </div>
                    <p className={`font-display text-3xl number-display value-highlight ${highlight ? 'gold-gradient-text' : 'text-luxury-text'}`}>
                        {value}
                    </p>
                    {subtitle && (
                        <p className="text-luxury-text-muted text-xs mt-2 font-light">{subtitle}</p>
                    )}
                </div>
            </div>
        );

        // Componente de escala
        const ScaleItem = ({ range, percentage, isActive }) => (
            <div className={`flex justify-between py-2 transition-all duration-500 ${isActive ? 'scale-active pl-4' : 'text-luxury-text-muted'}`}>
                <span className="text-sm font-light">{range}</span>
                <span className="text-sm font-medium">{percentage}%</span>
            </div>
        );

        // Componente principal
        const LegacyCalculator = () => {
            const [productLines, setProductLines] = useState([{ product: null, quantity: 1 }]);

            const addProductLine = () => {
                setProductLines([...productLines, { product: null, quantity: 1 }]);
            };

            const removeProductLine = (index) => {
                if (productLines.length > 1) {
                    setProductLines(productLines.filter((_, i) => i !== index));
                }
            };

            const updateProductLine = (index, field, value) => {
                const updated = [...productLines];
                updated[index][field] = value;
                setProductLines(updated);
            };

            // Cálculos
            const calculations = useMemo(() => {
                let totalPuntos = 0;
                let totalGananciaMinorista = 0;

                productLines.forEach(({ product, quantity }) => {
                    if (product) {
                        totalPuntos += product.vv * quantity;
                        totalGananciaMinorista += product.bonoMinoristaSinImpuesto * quantity;
                    }
                });

                const porcentajeBono2 = getBono2Percentage(totalPuntos);
                const porcentajeBono3 = getBono3Percentage(totalPuntos);

                let baseGananciaVenta = 0;
                productLines.forEach(({ product, quantity }) => {
                    if (product) {
                        baseGananciaVenta += product.precioMiembroSinImpuesto * quantity;
                    }
                });
                const gananciaVenta = baseGananciaVenta * (porcentajeBono2 / 100);
                const gananciaReferir = baseGananciaVenta * (porcentajeBono3 / 100);
                const totalGanancias = totalGananciaMinorista + gananciaVenta + gananciaReferir;

                return {
                    totalPuntos,
                    totalGananciaMinorista,
                    porcentajeBono2,
                    gananciaVenta,
                    porcentajeBono3,
                    gananciaReferir,
                    totalGanancias
                };
            }, [productLines]);

            const hasProducts = productLines.some(pl => pl.product !== null);

            return (
                <div className="min-h-screen py-12 px-4 sm:px-6 lg:px-8">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <header className="text-center mb-16 animate-fade-up">
                            <div className="mb-6">
                                <div className="inline-block">
                                    <div className="flex items-center justify-center gap-4 mb-4">
                                        <div className="w-16 h-px bg-gradient-to-r from-transparent to-luxury-gold"></div>
                                        <span className="text-luxury-gold text-[10px] tracking-[0.4em] uppercase">Calculadora Empresarial</span>
                                        <div className="w-16 h-px bg-gradient-to-l from-transparent to-luxury-gold"></div>
                                    </div>
                                </div>
                            </div>
                            <h1 className="font-display text-6xl sm:text-7xl lg:text-8xl font-light tracking-wide mb-4">
                                <span className="gold-gradient-text">LEGACY</span>
                            </h1>
                            <p className="text-luxury-text-muted text-sm tracking-[0.3em] uppercase font-light">
                                Proyecta tus ganancias
                            </p>
                        </header>

                        <div className="grid grid-cols-1 xl:grid-cols-3 gap-10">
                            {/* Panel de productos */}
                            <div className="xl:col-span-2">
                                <div className="flex items-center justify-between mb-8">
                                    <div>
                                        <h2 className="font-display text-2xl text-luxury-text font-light">Mis Productos</h2>
                                        <p className="text-luxury-text-muted text-xs mt-1">Agrega los productos que deseas calcular</p>
                                    </div>
                                    <button 
                                        onClick={addProductLine}
                                        className="btn-luxury px-6 py-3 rounded-xl text-xs"
                                    >
                                        + Agregar
                                    </button>
                                </div>

                                {productLines.map((line, index) => (
                                    <ProductLine
                                        key={index}
                                        index={index}
                                        product={line.product}
                                        quantity={line.quantity}
                                        onProductChange={(p) => updateProductLine(index, 'product', p)}
                                        onQuantityChange={(q) => updateProductLine(index, 'quantity', q)}
                                        onRemove={() => removeProductLine(index)}
                                        showRemove={productLines.length > 1}
                                    />
                                ))}

                                {/* Escalas de bonos */}
                                <div className="mt-10 grid grid-cols-1 md:grid-cols-2 gap-6 relative z-[1]">
                                    <div className="card-premium rounded-2xl p-6 animate-fade-up" style={{animationDelay: '0.3s'}}>
                                        <div className="flex items-center gap-3 mb-5">
                                            <div className="w-2 h-2 rounded-full bg-luxury-gold"></div>
                                            <h3 className="text-luxury-gold font-display text-lg font-light">Escala Ganancia por Venta</h3>
                                        </div>
                                        <div className="space-y-1">
                                            <ScaleItem range="0 — 499 puntos" percentage={4} isActive={calculations.porcentajeBono2 === 4} />
                                            <ScaleItem range="500 — 2,500 puntos" percentage={8} isActive={calculations.porcentajeBono2 === 8} />
                                            <ScaleItem range="2,501 — 9,999 puntos" percentage={12} isActive={calculations.porcentajeBono2 === 12} />
                                            <ScaleItem range="10,000+ puntos" percentage={20} isActive={calculations.porcentajeBono2 === 20} />
                                        </div>
                                    </div>
                                    <div className="card-premium rounded-2xl p-6 animate-fade-up" style={{animationDelay: '0.4s'}}>
                                        <div className="flex items-center gap-3 mb-5">
                                            <div className="w-2 h-2 rounded-full bg-luxury-gold"></div>
                                            <h3 className="text-luxury-gold font-display text-lg font-light">Escala Ganancia por Referir</h3>
                                        </div>
                                        <div className="space-y-1">
                                            <ScaleItem range="0 — 249 puntos" percentage={0} isActive={calculations.porcentajeBono3 === 0} />
                                            <ScaleItem range="250 — 499 puntos" percentage={4} isActive={calculations.porcentajeBono3 === 4} />
                                            <ScaleItem range="500 — 2,499 puntos" percentage={12} isActive={calculations.porcentajeBono3 === 12} />
                                            <ScaleItem range="2,500 — 9,999 puntos" percentage={16} isActive={calculations.porcentajeBono3 === 16} />
                                            <ScaleItem range="10,000+ puntos" percentage={24} isActive={calculations.porcentajeBono3 === 24} />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Panel de resultados */}
                            <div className="xl:col-span-1">
                                <div className="sticky top-8">
                                    <div className="mb-8">
                                        <h2 className="font-display text-2xl text-luxury-text font-light">Mis Ganancias</h2>
                                        <p className="text-luxury-text-muted text-xs mt-1">Resumen de tu proyección</p>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        {/* Puntos totales */}
                                        <ResultCard
                                            title="Puntos Totales"
                                            value={formatNumber(calculations.totalPuntos) + " VV"}
                                            icon="✦"
                                            delay={0.1}
                                        />

                                        <div className="divider-luxury my-6"></div>

                                        {/* Ganancia Minorista */}
                                        <ResultCard
                                            title="Ganancia Minorista"
                                            value={formatCurrency(calculations.totalGananciaMinorista)}
                                            subtitle="Diferencia precio público vs miembro"
                                            icon="◈"
                                            delay={0.2}
                                        />

                                        {/* Ganancia por Venta */}
                                        <ResultCard
                                            title={`Ganancia por Venta · ${calculations.porcentajeBono2}%`}
                                            value={formatCurrency(calculations.gananciaVenta)}
                                            subtitle="Según tu nivel de puntos"
                                            icon="◇"
                                            delay={0.3}
                                        />

                                        {/* Ganancia por Referir */}
                                        <ResultCard
                                            title={`Ganancia por Referir · ${calculations.porcentajeBono3}%`}
                                            value={formatCurrency(calculations.gananciaReferir)}
                                            subtitle="Bonificación por compartir"
                                            icon="◆"
                                            delay={0.4}
                                        />

                                        <div className="divider-luxury my-6"></div>

                                        {/* Total */}
                                        <ResultCard
                                            title="Total Ganancias Potenciales"
                                            value={formatCurrency(calculations.totalGanancias)}
                                            highlight={true}
                                            icon="★"
                                            delay={0.5}
                                        />
                                    </div>

                                    {!hasProducts && (
                                        <div className="mt-8 text-center">
                                            <div className="inline-block p-6 rounded-2xl border border-dashed border-luxury-gold/20">
                                                <p className="text-luxury-text-muted text-sm font-light">
                                                    Selecciona productos para<br/>ver tus ganancias potenciales
                                                </p>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                        {/* Footer */}
                        <footer className="mt-20 text-center animate-fade-up" style={{animationDelay: '0.6s'}}>
                            <div className="divider-luxury w-64 mx-auto mb-8"></div>
                            <p className="text-luxury-text-muted text-xs tracking-[0.2em] uppercase">
                                Lista de precios Colombia · Abril 2025
                            </p>
                            <p className="text-luxury-text-muted/50 text-[10px] mt-3 tracking-wider">
                                Los cálculos son estimados y pueden variar según condiciones del programa
                            </p>
                        </footer>
                    </div>
                </div>
            );
        };

        // Renderizar la aplicación
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LegacyCalculator />);
    </script>
</body>
</html>
